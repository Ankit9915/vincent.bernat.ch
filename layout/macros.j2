{# List blog posts pertaining to a given language #}

{% macro list_posts(site, lang) %}
{% filter typogrify %}
<ul>
{% for resource in site.content.walk_resources_sorted_by_time()
   if resource.relative_path[:2] == lang -%}
  <li>
<a href="{{ resource.name }}">{{ resource.meta.title }}</a>
<span style="float: right">{{ resource_date(resource) }}</span>
  </li>
{% endfor %}
</ul>
{% endfilter %}
{% endmacro %}

{% macro resource_date(resource) %}
{% if resource.meta.created != None %}
<time class="timeago"
      datetime="{{ resource.meta.created.strftime('%Y-%m-%dT%H:%M:%S%z') }}"
      pubdate>
  {{ resource.meta.created.strftime('%a, %d %b %Y, %H:%M') }}
</time>
{% endif %}
{% endmacro %}
