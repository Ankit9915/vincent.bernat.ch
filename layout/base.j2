{# -*- html -*- #}
<!doctype html>
<!--[if lte IE 7]> <html class="no-js oldie" lang="{{ resource.meta.language }}"> <![endif]-->
<!--[if gt IE 7]><!--><html class="no-js" lang="{{ resource.meta.language }}"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>{{ resource.meta.title }} | {{ resource.meta.author }}</title>
  <meta name="keywords" content="{{ resource.meta.keywords }}">
  <meta name="author" content="{{ resource.meta.author }}">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="apple-touch-icon-precomposed" href="{{ media_url('images/l/apple-touch-icon.png') }}">
  <link rel="alternate" href="{{ content_url( resource.meta.language + '/blog/atom.xml') }}" type="application/atom+xml" title="ATOM feed">
  <link rel="stylesheet" href="{{ media_url('css/luffy.css') }}" type="text/css">
{% block stylesheets %}{% endblock %}
  <script src="{{ media_url('js/modernizr.js') }}"></script>
</head>
<body {% if resource.meta.class is defined %}class="lf-{{ resource.meta.class }}"{% endif %}>

  {# Navigation bar #}
  <nav id="lf-navbar">
    <div id="lf-homeicon">
      <a class="lf-sprite lf-sprite-strawhat"
	 href="{{ content_url( resource.meta.language ) }}/"></a>
    </div>
    <div id="lf-menubar">
      <form id="lf-search" action="//www.google.com/search">
	<span id="lf-search-glass"><i class="lf-sprite lf-sprite-search"></i></span>
	<input type="hidden" name="hl" value="{{ resource.meta.language }}">
	<input type="hidden" name="q"  value="site:www.luffy.cx/*">
	<input id="lf-search-query" type="text" name="q"
	       placeholder="{{resource.meta.l10n.search}}" value="">
      </form>
      {% include "menu.j2" %}
    </div>
  </nav>

{% include "sidebar.j2" %}
  
  {# Pages #}
  <div id="lf-pages">
    <div id="lf-page-1"></div>
    <div id="lf-page-2"></div>
    <div id="lf-page">
      <article>
	<header>
{% block header %}
	  <h1>{{resource.meta.title}}</h1>
	  {% if resource.meta.author != None %}<h2>{{resource.meta.author}}</h2>{% endif %}
{% from "macros.j2" import resource_date with context %}
{{ resource_date(resource) }}
{% endblock %}
	</header>
{% block main %}
	<div id="lf-main" role="main">
{% filter markdown|typogrify -%}
{% mark article -%}{% block article -%}{%- endblock %}{%- endmark %}
{%- endfilter %}
	</div>
{% endblock %}
      </article>
{% set previous = resource|attr("next_by_time_" + resource.meta.language) %}
{% set next = resource|attr("prev_by_time_" + resource.meta.language) %}
{% if previous or next %}
      <nav id="lf-prevnext">
{% if previous %}
<div class="lf-prev">
<a href="{{ content_url(previous.url) }}"><span title="{{ resource.meta.l10n.previous }}" class="lf-sprite lf-sprite-slimbox-left">←</span> {{ previous.meta.title }}</a>
</div>
{% endif %}
{% if next %}
<div class="lf-next">
<a href="{{ content_url(next.url) }}">{{ next.meta.title }} <span title="{{ resource.meta.l10n.next }}" class="lf-sprite lf-sprite-slimbox-right">→</span></a>
</div>
{% endif %}
<div style="clear: both">
      </nav>
{% endif %}
{% include "comments.j2" %}
    </div>
  </div>

  {# Footer #}
  <footer>
    <div class="lf-block">
      <h3>{{ resource.meta.l10n.otherlinks }}</h3>
      <ul>
	<li><a href="https://github.com/vincentbernat">GitHub</a></li>
	<li><a href="http://www.linkedin.com/in/vincentbernat">LinkedIn</a></li>
	<li><a href="http://qa.debian.org/developer.php?login=bernat">Debian</a></li>
	<li><a href="http://delicious.com/vbernat/">Delicious</a></li>
	<li><a href="http://twitter.com/vince2_">@vince2_</a></li>
      </ul>
    </div>
 
    <div class="lf-block">
      <h3>Sources</h3>
      <ul>
	<li>Powered by <a href="http://ringce.com/hyde">Hyde</a></li>
	<li><a href="https://github.com/vincentbernat/www.luffy.cx">Site</a></li>
	<li>
	  <a href="https://github.com/vincentbernat/www.luffy.cx/tree/master/content/{{ resource.relative_path }}">Page</a>
	</li>
      </ul>
    </div>
    <address>
      © 2011 <a href="mailto:bernat@luffy.cx">Vincent Bernat</a>
      <span><a class="lf-sprite lf-sprite-rss"
	 href="{{ content_url(resource.meta.language + '/blog/atom.xml') }}">
	&nbsp;
      </a></span>
    </address>
    <div style="clear:both"></div>
  </footer>

  {# Load remaining scripts #}
  <script>
    yepnope([{
       load: '//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js',
       complete: function () {
           if (!window.jQuery) {
	       yepnope('{{ media_url("js/libs/jquery-1.6.1.min.js") }}');
	   }
       }
     },{
       load: '{{ media_url("js/luffy.js") }}'
     }]);
  </script>

  {% include "analytics.j2" %}
</body>
</html>
